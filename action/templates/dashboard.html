{#<!DOCTYPE html>#}
{#<html lang="en">#}
{#<head>#}
{#    <meta charset="UTF-8">#}
{#    <title>实时显示人员出入信息</title>#}
{#    <style>#}
{#        .container {#}
{#            width: 100%;#}
{#            height: 100%;#}
{#            display: flex;#}
{#            justify-content: center;#}
{#            align-items: center;#}
{#        }#}
{##}
{#        .records {#}
{#            width: 80%;#}
{#            max-height: 80vh;#}
{#            overflow-y: scroll;#}
{#        }#}
{##}
{#        .record {#}
{#            border: 1px solid #ccc;#}
{#            padding: 10px;#}
{#            margin-bottom: 10px;#}
{#        }#}
{##}
{#        .record h3 {#}
{#            font-size: 1.2em;#}
{#            margin-bottom: 5px;#}
{#        }#}
{##}
{#        .record p {#}
{#            font-size: 0.9em;#}
{#        }#}
{#    </style>#}
{#</head>#}
{#<body>#}
{#<div class="container">#}
{#    <div class="records">#}
{#        <!-- 人员出入信息将在此处显示 -->#}
{#    </div>#}
{#</div>#}
{#<script>#}
{#    const socket = new WebSocket('ws://localhost:8000/action/');#}
{##}
{#    socket.onopen = function (event) {#}
{#        console.log('WebSocket connection opened');#}
{#    };#}
{##}
{#    socket.onmessage = function (event) {#}
{#        const data = JSON.parse(event.data);#}
{#        const recordsList = data;#}
{#        const recordsElement = document.querySelector('.records');#}
{#        recordsList.forEach(record => {#}
{#            const recordElement = document.createElement('div');#}
{#            recordElement.classList.add('record');#}
{#            recordElement.innerHTML = `#}
{#                    <h3>${record.user}</h3>#}
{#                    <p>${record.building}<p>#}
{#                    <p>${record.createdat}</p>#}
{#                    <p>${record.status}</p>#}
{#                `;#}
{#            recordsElement.appendChild(recordElement);#}
{#        });#}
{#    };#}
{##}
{#    socket.onclose = function (event) {#}
{#        console.log('WebSocket connection closed');#}
{#    };#}
{##}
{#    socket.onerror = function (error) {#}
{#        console.error('WebSocket error:', error);#}
{#    };#}
{#</script>#}
{#</body>#}
{#</html>#}